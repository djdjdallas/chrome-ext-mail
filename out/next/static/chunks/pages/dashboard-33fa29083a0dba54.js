(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1015:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(3625)}])},3954:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var r=s(512),a=s(8388);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},3625:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(1844),a=s(5784),l=s(1163);s(1664);var n=s(3954);let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});d.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});i.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});m.displayName="CardContent";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});x.displayName="CardFooter";var f=s(7542),u=s(1373);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,u.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),p=(0,u.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=(0,u.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function N(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)({totalEmailsSent:0,totalEmailsOpened:0,openRate:0}),c=(0,l.useRouter)(),x=(0,f.createClientComponentClient)();return((0,a.useEffect)(()=>{let e=async()=>{let{data:{session:e},error:s}=await x.auth.getSession();(null==e?void 0:e.user)?t(e.user):(s&&console.error("Error fetching user or no session:",null==s?void 0:s.message),c.push("/#"))},s=async()=>{try{let{data:e,error:t}=await x.from("email_tracking").select("id");if(t)throw t;let s=e.length,{data:r,error:a}=await x.from("email_tracking").select("id").not("opened_at","is",null);if(a)throw a;let l=r.length,d=s?l/s*100:0;console.log({totalEmailsSent:s,totalEmailsOpened:l,openRate:d.toFixed(2)}),n({totalEmailsSent:s||0,totalEmailsOpened:l||0,openRate:d.toFixed(2)})}catch(e){console.error("Error fetching metrics:",e)}};e(),s();let{data:r}=x.auth.onAuthStateChange((e,s)=>{"SIGNED_IN"===e?t(s.user):"SIGNED_OUT"===e&&(t(null),c.push("/#"))});return()=>{r.subscription.unsubscribe()}},[x,c]),e)?(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-muted/40 mt-10",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-xl font-bold tracking-tighter cursor-pointer ml-5 mt-20",children:"Dashboard"})}),(0,r.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-4 sm:px-6 sm:py-0 md:gap-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(0,r.jsxs)(d,{children:[(0,r.jsxs)(o,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(i,{className:"text-sm font-medium",children:"Total Emails Sent"}),(0,r.jsx)(h,{className:"w-4 h-4 text-muted-foreground"})]}),(0,r.jsxs)(m,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.totalEmailsSent}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+10% from last month"})]})]}),(0,r.jsxs)(d,{children:[(0,r.jsxs)(o,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(i,{className:"text-sm font-medium",children:"Open Rate"}),(0,r.jsx)(p,{className:"w-4 h-4 text-muted-foreground"})]}),(0,r.jsxs)(m,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[s.openRate,"%"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2.1% from last month"})]})]}),(0,r.jsxs)(d,{children:[(0,r.jsxs)(o,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(i,{className:"text-sm font-medium",children:"Total Emails Opened"}),(0,r.jsx)(g,{className:"w-4 h-4 text-muted-foreground"})]}),(0,r.jsxs)(m,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.totalEmailsOpened}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+1.5% from last month"})]})]})]})})]}):(0,r.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[507,888,179],function(){return e(e.s=1015)}),_N_E=e.O()}]);